#
# behat.yml file for testing on Pantheon.
#
default:
  suites:
    default:
      paths:
        - "%paths.base%/features"
        - "%paths.base%/site-features"
      contexts:
        - FeatureContext
        - ImageContext
        - AmpContext
        - MenuContext
        - VideoContext
        - Drupal\DrupalExtension\Context\DrupalContext
        - Drupal\DrupalExtension\Context\MinkContext
        - Drupal\DrupalExtension\Context\MessageContext
        - Drupal\DrupalExtension\Context\DrushContext
        - FailAid\Context\FailureContext
  extensions:
    Robertfausk\Behat\PantherExtension: ~
    Drupal\MinkExtension:
      files_path: './data-files'
      # base_url set by ENV
      browserkit_http: ~
      browser_name: chrome
      default_session: command_line_browser
      javascript_session: js_enabled_browser
      sessions:
        command_line_browser:
          browserkit_http: ~
        js_enabled_browser:
          panther:
            options:
              hostname: '127.0.0.1'
              port: 9222
              browser: 'chrome'
              webServerDir: '%paths.base%/public'
            manager_options:
              connection_timeout_in_ms: 60000
              request_timeout_in_ms: 120000
              chromedriver_arguments:
                - '--incognito'
                - '--user-agent=Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.61 Safari/537.36'

    Drupal\DrupalExtension:
      blackbox: ~
      api_driver: 'drush'

  formatters:
    pretty:
      output_styles:
        comment: [ magenta ]

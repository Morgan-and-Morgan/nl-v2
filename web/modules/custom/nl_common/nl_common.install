<?php

/**
 * @file
 * File contains update hooks and such.
 */

 /**
 * Implements hook_update_N().
 *
 * Remove uninstalled modules from system schema.
 */
function nl_common_update_8001() {
  $uninstall_modules = [
    'feeds_ex',
    'feeds_tamper',
    'tamper',
  ];

  \Drupal::service('module_installer')->uninstall($uninstall_modules);

}

/**
 * Implements hook_update_N().
 *
 * Remove modules from system.schema.
 */
function nl_common_update_8002() {
  $uninstall_modules = [
    'feeds_ex',
    'feeds_tamper',
    'tamper',
  ];

  foreach ($uninstall_modules as $module) {
    \Drupal::keyValue('system.schema')->delete($module);
  }

}

/**
 * Implements hook_update_N().
 *
 * Remove modules from system.schema.
 */
function nl_common_update_8003() {
  $uninstall_modules = [
    'feeds_ex',
    'feeds_tamper',
    'tamper',
  ];

  foreach ($uninstall_modules as $module) {
    \Drupal::configFactory()
      ->getEditable("core.extension")
      ->clear("module." . $module)
      ->save(TRUE);
  }

}
